<!DOCTYPE html>
<html>
<head>
<meta name="theme-color" content="#00bfff">
    <title>clicker game</title>
    <link rel="icon" type="image/png" href="ouse.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        body { background-color: rgb(0, 255, 0); font-family: Arial; text-align: center; margin-top: 50px; overflow: hidden; }
        #score { font-size: 2em; margin-bottom: 20px; position: relative; z-index: 20; }
        #clickBtn { font-size: 1.5em; padding: 20px 40px; cursor: pointer; position: relative; z-index: 20; }
        #shopButtons { position:absolute; right:50px; top:100px; display:none; z-index:20; }
        #rebirthBtn { background:black; color:rgb(105, 103, 103); font-size:1.2em; padding:10px 30px; margin:10px; }
        #homeScreen {
            position:fixed;
            top:0; left:0; width:100vw; height:100vh;
            background:#74d8ff;
            display:flex; flex-direction:column; align-items:center; justify-content:center;
            z-index:1000;
        }
        #playBtn {
            font-size:1.5em;
            padding:20px 40px;
            margin-top:30px;
            background:black;
            color:white;
            border:none;
            border-radius:8px;
            cursor:pointer;
        }
        canvas { 
            position: fixed;
            top: 0; left: 0;
            /* no width/height here to prevent warping */
            z-index: 5;
        }
        /* Default custom cursor everywhere */
    /* Default cursor */
    html, body, * {
     cursor: url('cursor.png') 6 4, auto !important;
     -webkit-user-drag: none;
     user-drag: none;
    }

    /* When mouse is held down */
    body.mouse-down, body.mouse-down * {
     cursor: url('pointer.png') 6 4, auto !important;
    }

    </style>
     <script>
        // Create the audio element
        const music = new Audio("lofi.mp3"); // replace with your file
        music.loop = true; // keeps playing in a loop

        let musicStarted = false;

        // Function to start music on first click
        function startMusic() {
            if (!musicStarted) {
                music.play();
                musicStarted = true;
                console.log("Music started!");
            }
        }

        // Listen for the first click anywhere on the page
        document.addEventListener("click", startMusic, { once: true });
        // (once:true makes sure it only runs once)
    </script>
</head>
<body>
    <!-- Home Screen -->
    <div id="homeScreen">
        <h1 style="font-size:3em; color:rgb(0, 0, 0); margin-bottom:10px;">the clicker game</h1>
        <button id="playBtn">play</button>
    </div>

    <h1 style="position: relative; z-index: 20;">this is a cool game click for clicks</h1>
    <div id="score">clicks: 0</div>
    <button id="clickBtn" style="color:black;">click for clicks</button>
    <button id="shopBtn" style="position:relative; z-index:20; color: rgb(0, 0, 0); background-color: gold;">shop</button>
    <button id="gotoinfoBTN" style="position:fixed; top:10px; right:10px; z-index:20; color: rgb(0, 0, 0); background-color: lightgrey;" onclick="window.location.href='homepage.html'">homepage</button>

    <!-- Highest Score Display -->
    <div id="highestScore" style="position:fixed; bottom:50px; left:10px; font-size:1.2em; color:white; background:rgba(0,0,0,0.5); padding:8px 16px; border-radius:8px; border:2px solid white; z-index:20;">
        Highest score: 0
    </div>

    <!-- clock display -->
    <div id="clock" style="position:fixed; bottom:10px; left:10px; font-size:1.2em; color:white; background:rgba(0,0,0,0.5); padding:8px 16px; border-radius:8px; border:2px solid white; cursor:pointer; z-index:20;"></div>
    <div id="giantClockOverlay" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.85); z-index:2000; align-items:center; justify-content:center;">
        <div style="position:relative; width:100vw; height:100vh; display:flex; align-items:center; justify-content:center;">
            <div id="giantClock" style="font-size:8em; color:white; background:rgba(0,0,0,0.7); padding:40px 80px; border-radius:32px; border:4px solid white; box-shadow:0 0 40px #fff;"></div>
            <button id="closeGiantClock" style="position:absolute; top:40px; right:60px; font-size:2em; background:red; color:white; border:none; border-radius:50%; width:60px; height:60px; cursor:pointer;">âœ•</button>
        </div>
    </div>
    <div id="shopButtons" style="display:none; position:absolute; right:50px; top:100px; flex-direction:column; z-index:20;">
        <button id="item1Btn" style="display:block; margin-bottom:8px;">1 CPS (10 clicks)</button>
        <button id="item2Btn" style="display:block; margin-bottom:8px;">5 CPS (50 clicks)</button> 
        <button id="item3Btn" style="display:block; margin-bottom:8px;">10 CPS (100 clicks)</button> 
        <button id="item4Btn" style="display:block; margin-bottom:8px;">50 CPS (500 clicks)</button> 
        <button id="item5Btn" style="display:block; margin-bottom:8px;">100 CPS (1000 clicks)</button>
        <button id="item6Btn" style="display:block; margin-bottom:8px;">1000 CPS (10000 clicks)</button>
        <button id="item7Btn" style="display:block; margin-bottom:8px;">10000 CPS (100000 clicks)</button>
        <button id="item8Btn" style="display:block; margin-bottom:8px;">100000 CPS (1000000 clicks)</button>
          <select id="autoSelect"> 
            <option id="item0auto">1 CPS</option> 
            <option id="item1auto">5 CPS</option> 
            <option id="item2auto">10 CPS</option>
            <option id="item3auto">50 CPS</option>
            <option id="item4auto">100 CPS</option>
            <option id="item5auto">500 CPS</option> 
            <option id="item6auto">1000 CPS</option>
            <option id="item7auto">10000 CPS</option>
            <option id="item8auto">100000 CPS</option>
            <option id="item9auto">1000000 CPS</option> 
        </select> <button id="autoBuyBTN">buy</button>
        <button id="rebirthBtn" style="display:block;">rebirth</button>
    </div>
    <script>
        const homeScreen = document.getElementById('homeScreen');
        const playBtn = document.getElementById('playBtn');
        playBtn.addEventListener('click', () => {
            homeScreen.style.display = 'none';
        });

        // Game variables
        let score = 0;
        let cps = 0;
        let cpsInterval = null;
        let highestScore = 0;

        // Load/save
        function loadData() {
            const savedScore = localStorage.getItem('score');
            const savedCps = localStorage.getItem('cps');
            const savedHighest = localStorage.getItem('highestScore');

            score = savedScore ? parseInt(savedScore) : 0;
            cps = savedCps ? parseInt(savedCps) : 0;
            highestScore = savedHighest ? parseInt(savedHighest) : 0;

            updateHighestScoreDisplay();
        }

        function saveData() {
            localStorage.setItem('score', score);
            localStorage.setItem('cps', cps);
            localStorage.setItem('highestScore', highestScore);
        }

        function updateHighestScoreDisplay() {
            document.getElementById('highestScore').textContent = "Highest score: " + highestScore;
        }

        function checkHighestScore() {
            if (score > highestScore) {
                highestScore = score;
                updateHighestScoreDisplay();
                saveData();
            }
        }

        const scoreDisplay = document.getElementById('score');
        const clickBtn = document.getElementById('clickBtn');
        const shopBtn = document.getElementById('shopBtn');
        const shopButtons = document.getElementById('shopButtons');
        const item1Btn = document.getElementById('item1Btn');
        const item2Btn = document.getElementById('item2Btn');
        const item3Btn = document.getElementById('item3Btn');
        const item4Btn = document.getElementById('item4Btn');
        const item5Btn = document.getElementById('item5Btn');
        const item6Btn = document.getElementById('item6Btn');
        const item7Btn = document.getElementById('item7Btn');
        const item8Btn = document.getElementById('item8Btn');
        const rebirthBtn = document.getElementById('rebirthBtn');

        function updateCPS() {
    if (cpsInterval) clearInterval(cpsInterval);
    if (cps > 0) {
        const updatesPerSecond = 60;
        let fractionalScore = 0; // store partial clicks

        cpsInterval = setInterval(() => {
            fractionalScore += cps / updatesPerSecond;

            // Only add to score when we pass a whole click
            if (fractionalScore >= 1) {
                const wholeClicks = Math.floor(fractionalScore);
                fractionalScore -= wholeClicks;
                score += wholeClicks;
                scoreDisplay.textContent = 'clicks: ' + score;
                checkHighestScore();
                saveData();
            }
        }, 1000 / updatesPerSecond);
    }
}



        shopBtn.addEventListener('click', () => {
            shopButtons.style.display = shopButtons.style.display === 'none' ? 'block' : 'none';
        });

        item1Btn.addEventListener('click', () => { if (score >= 10) { score -= 10; cps += 1; updateCPS(); scoreDisplay.textContent = 'clicks: ' + score; checkHighestScore(); saveData(); } });
        item2Btn.addEventListener('click', () => { if (score >= 50) { score -= 50; cps += 5; updateCPS(); scoreDisplay.textContent = 'clicks: ' + score; checkHighestScore(); saveData(); } });
        item3Btn.addEventListener('click', () => { if (score >= 100) { score -= 100; cps += 10; updateCPS(); scoreDisplay.textContent = 'clicks: ' + score; checkHighestScore(); saveData(); } });
        item4Btn.addEventListener('click', () => { if (score >= 500) { score -= 500; cps += 50; updateCPS(); scoreDisplay.textContent = 'clicks: ' + score; checkHighestScore(); saveData(); } });
        item5Btn.addEventListener('click', () => { if (score >= 1000) { score -= 1000; cps += 100; updateCPS(); scoreDisplay.textContent = 'clicks: ' + score; checkHighestScore(); saveData(); } });
        item6Btn.addEventListener('click', () => { if (score >= 10000) { score -= 10000; cps += 1000; updateCPS(); scoreDisplay.textContent = 'clicks: ' + score; checkHighestScore(); saveData(); } });
        item7Btn.addEventListener('click', () => { if (score >= 100000) { score -= 100000; cps += 10000; updateCPS(); scoreDisplay.textContent = 'clicks: ' + score; checkHighestScore(); saveData(); } });
        item8Btn.addEventListener('click', () => { if (score >= 1000000) { score -= 1000000; cps += 100000; updateCPS(); scoreDisplay.textContent = 'clicks: ' + score; checkHighestScore(); saveData(); } });
        rebirthBtn.addEventListener('click', () => { score = 0; cps = 0; scoreDisplay.textContent = 'clicks: ' + score; updateCPS(); saveData(); });
        clickBtn.addEventListener('click', () => { score++; scoreDisplay.textContent = 'clicks: ' + score; checkHighestScore(); saveData(); });

        loadData();
        scoreDisplay.textContent = 'clicks: ' + score;
        updateCPS();

        // Random button color
        function getRandomColor() { return "#" + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0'); }
        setInterval(() => { clickBtn.style.backgroundColor = getRandomColor(); clickBtn.style.color = "white"; }, 1000);

        // Clock
        function formatClock(now) {
            let hours = now.getHours();
            let minutes = now.getMinutes().toString().padStart(2, '0');
            let seconds = now.getSeconds().toString().padStart(2, '0');
            let ms = now.getMilliseconds().toString().padStart(3, '0');
            let period = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12 || 12;
            return `${hours}:${minutes}:${seconds}.${ms} ${period}`;
        }

        function updateClock() {
            const clock = document.getElementById('clock');
            const now = new Date();
            clock.textContent = formatClock(now);

            const giantClock = document.getElementById('giantClock');
            const overlay = document.getElementById('giantClockOverlay');
            if (overlay.style.display === 'flex') {
                giantClock.textContent = formatClock(now);
            }
        }
        setInterval(updateClock, 50);
        updateClock();

        const clockDiv = document.getElementById('clock');
        const giantClockOverlay = document.getElementById('giantClockOverlay');
        const closeGiantClock = document.getElementById('closeGiantClock');

        clockDiv.addEventListener('click', () => {
            giantClockOverlay.style.display = 'flex';
        });

        closeGiantClock.addEventListener('click', () => {
            giantClockOverlay.style.display = 'none';
        });
    </script>

    <!-- Physics with Matter.js -->
    <canvas id="world"></canvas>
    <script>
        const { Engine, Render, Runner, World, Bodies, Constraint, Mouse } = Matter;

        const engine = Engine.create();
        const world = engine.world;

        const render = Render.create({
            canvas: document.getElementById('world'),
            engine: engine,
            options: { wireframes: false, background: "transparent" }
        });
        Render.run(render);
        const runner = Runner.create();
        Runner.run(runner, engine);

        // Boundaries
        const ground = Bodies.rectangle(0, 0, 0, 0, { isStatic: true });
        const leftWall = Bodies.rectangle(0, 0, 0, 0, { isStatic: true });
        const rightWall = Bodies.rectangle(0, 0, 0, 0, { isStatic: true });
        const ceiling = Bodies.rectangle(0, 0, 0, 0, { isStatic: true });
        World.add(world, [ground, leftWall, rightWall, ceiling]);

        // Orange box with black outline
        const box = Bodies.rectangle(window.innerWidth / 2, 100, 30, 30, {
            restitution: 0.4,
            friction: 0.5,
            render: {
                fillStyle: "orange",
                strokeStyle: "black",
                lineWidth: 3
            }
        });
        World.add(world, box);

        const canvas = render.canvas;

        // Resize function
        function resizeCanvas() {
            render.canvas.width = window.innerWidth;
            render.canvas.height = window.innerHeight;
            render.options.width = window.innerWidth;
            render.options.height = window.innerHeight;

            // Update boundaries
            Matter.Body.setPosition(ground, { x: window.innerWidth / 2, y: window.innerHeight + 25 });
            Matter.Body.setVertices(ground, Matter.Vertices.fromPath(`0 0 ${window.innerWidth} 0 ${window.innerWidth} 50 0 50`));

            Matter.Body.setPosition(leftWall, { x: -25, y: window.innerHeight / 2 });
            Matter.Body.setVertices(leftWall, Matter.Vertices.fromPath(`0 0 50 0 50 ${window.innerHeight} 0 ${window.innerHeight}`));

            Matter.Body.setPosition(rightWall, { x: window.innerWidth + 25, y: window.innerHeight / 2 });
            Matter.Body.setVertices(rightWall, Matter.Vertices.fromPath(`0 0 50 0 50 ${window.innerHeight} 0 ${window.innerHeight}`));

            Matter.Body.setPosition(ceiling, { x: window.innerWidth / 2, y: -25 });
            Matter.Body.setVertices(ceiling, Matter.Vertices.fromPath(`0 0 ${window.innerWidth} 0 ${window.innerWidth} 50 0 50`));
        }

        // Run resize once and whenever window changes
        resizeCanvas();
        window.addEventListener("resize", resizeCanvas);

        // Mouse hinge
        const mouse = Mouse.create(render.canvas);
        let hingeConstraint = null;
        function isInsideBox(mousePos, body) { return Matter.Bounds.contains(body.bounds, mousePos); }

        render.canvas.addEventListener("mousedown", e => {
            const mousePos = { x: e.clientX, y: e.clientY };
            if (isInsideBox(mousePos, box)) {
                hingeConstraint = Constraint.create({
                    pointA: mousePos,
                    bodyB: box,
                    pointB: { x: mousePos.x - box.position.x, y: mousePos.y - box.position.y },
                    stiffness: 0.9, damping: 0.1
                });
                World.add(world, hingeConstraint);
            }
        });
        render.canvas.addEventListener("mousemove", e => { if (hingeConstraint) hingeConstraint.pointA = { x: e.clientX, y: e.clientY }; });
        render.canvas.addEventListener("mouseup", () => { if (hingeConstraint) { World.remove(world, hingeConstraint); hingeConstraint = null; } });
    </script>
    <script>
  // Adds and removes a "mouse-down" class when you click
  document.addEventListener('mousedown', () => {
    document.body.classList.add('mouse-down');
  });
  document.addEventListener('mouseup', () => {
    document.body.classList.remove('mouse-down');
  });
      // Prevent the default drag image (keeps your custom cursor)
    document.addEventListener('dragstart', (e) => {
     e.preventDefault();
    });

</script>
<script>
let autoBuyerRunning = false;
let autoBuyerInterval = null;

// Match your existing game variables (adjust if different)
let score = window.score || 0;
let cps = window.cps || 0;

// Grab elements
const autoSelect = document.getElementById('autoSelect');
const autoBuyBTN = document.getElementById('autoBuyBTN');

// Define cost and cps gain for each shop item
const shopItems = [
  { cost: 10, gain: 1 },        // 1 CPS
  { cost: 50, gain: 5 },        // 5 CPS
  { cost: 100, gain: 10 },      // 10 CPS
  { cost: 500, gain: 50 },      // 50 CPS
  { cost: 1000, gain: 100 },    // 100 CPS
  { cost: 10000, gain: 500 },   // 500 CPS
  { cost: 100000, gain: 1000 }, // 1000 CPS
  { cost: 1000000, gain: 10000 }, // 10000 CPS
  { cost: 10000000, gain: 100000 }, // 100000 CPS
  { cost: 100000000, gain: 1000000 } // 1000000 CPS
];

// Helper to update score display and cps (adjust to your functions if named differently)
function updateDisplay() {
  const scoreDisplay = document.getElementById('scoreDisplay');
  const cpsDisplay = document.getElementById('cpsDisplay');
  if (scoreDisplay) scoreDisplay.textContent = `Clicks: ${score}`;
  if (cpsDisplay) cpsDisplay.textContent = `CPS: ${cps}`;
}

autoBuyBTN.addEventListener('click', () => {
  if (autoBuyerRunning) {
    clearInterval(autoBuyerInterval);
    autoBuyerRunning = false;
    autoBuyBTN.textContent = 'buy';
    console.log('Auto buyer stopped.');
    return;
  }

  const selectedIndex = autoSelect.selectedIndex;
  const selectedItem = shopItems[selectedIndex];
  if (!selectedItem) return;

  autoBuyerRunning = true;
  autoBuyBTN.textContent = 'stop';

  console.log(`Auto buyer started for item ${selectedIndex}`);

  autoBuyerInterval = setInterval(() => {
    if (score >= selectedItem.cost) {
      score -= selectedItem.cost;
      cps += selectedItem.gain;
      updateDisplay();
      if (typeof saveData === 'function') saveData(); // optional if you have a save system
    }
  }, 1000);
});
</script>

</body>
</html>

